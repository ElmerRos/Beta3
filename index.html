 <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Beast Reader (BETA) East New York</title>

  <!-- Bootstrap CSS -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />

  <!-- Flatpickr CSS (tema material_blue) -->
  <link
    href="https://cdn.jsdelivr.net/npm/flatpickr/dist/themes/material_blue.css"
    rel="stylesheet"
  />

  <!-- Bootstrap Icons -->
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"
  />

  <!-- Google Fonts -->
  <link
    href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Poppins:wght@400;700&display=swap"
    rel="stylesheet"
  />

  <!-- Intro.js (CSS + JS para el tutorial) -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/intro.js/minified/introjs.min.css"
  />
  <script src="https://unpkg.com/intro.js/minified/intro.min.js"></script>

  <!-- Custom CSS (con estilos neon, etc.) -->
  <link href="styles.css" rel="stylesheet" />

  <!-- Estilo para forzar tooltip blanco + texto negro en Intro.js -->
  <style>
    .introjs-tooltip {
      background-color: #fff !important;
      color: #000 !important;
      text-align: left;
    }
    .introjs-tooltipreferenceLayer,
    .introjs-overlay {
      z-index: 99999999 !important;
    }
    /* Ocultar manual español y creole por defecto (si quieres que aparezca inglés primero). 
       Si prefieres que todo aparezca oculto, pon #manualEnglishText { display: none } también. */
    #manualSpanishText,
    #manualCreoleText {
      display: none;
    }
  </style>
</head>

<body>
  <!-- Botones del tutorial en 3 idiomas -->
  <div style="position: absolute; top: 10px; right: 10px; z-index:99999;">
    <button id="helpEnglish" class="btn btn-secondary">E</button>
    <button id="helpSpanish" class="btn btn-secondary">S</button>
    <button id="helpCreole" class="btn btn-secondary">C</button>
  </div>

  <div class="container my-5">
    <h2 class="text-center mb-4">Beast Reader (Cricket) East New York</h2>

    <!-- 
        ============================================================
        FORMULARIO PRINCIPAL
        ============================================================
    -->
    <form id="lotteryForm">
      <!-- Date Selection -->
      <div class="row mb-3">
        <div class="col-md-4 col-sm-6">
          <label for="fecha" class="form-label">Bet Dates:</label>
          <input
            type="text"
            id="fecha"
            class="form-control glow-input"
            placeholder="Select date(s)"
            required
          />
        </div>
      </div>

      <!-- Tracks Selection -->
      <div class="mb-4">
        <label class="form-label">Select Tracks:</label>
        <div class="accordion" id="tracksAccordion">

          <!-- ================================ -->
          <!-- Sección USA TRACKS -->
          <!-- ================================ -->
          <div class="accordion-item">
            <h2 class="accordion-header" id="headingUSA">
              <button
                class="accordion-button collapsed"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#collapseUSA"
                aria-expanded="false"
                aria-controls="collapseUSA"
              >
                USA
              </button>
            </h2>
            <div
              id="collapseUSA"
              class="accordion-collapse collapse"
              aria-labelledby="headingUSA"
              data-bs-parent="#tracksAccordion"
            >
              <div class="accordion-body">
                <!-- EJEMPLO DE TUS TRACKS USA (puedes tener ~20+):
                     New York Mid Day, New York Evening, Georgia Mid Day, etc.
                     Con <div class="track-button-container">...
                     ... 
                     He aquí varios de los que tenías: -->
                <div class="track-button-container">
                  <input
                    class="track-checkbox"
                    type="checkbox"
                    value="New York Mid Day"
                    id="trackNYMidDay"
                  />
                  <label class="track-button" for="trackNYMidDay">
                    <span class="track-name">New York Mid Day</span>
                    <span
                      class="cutoff-time"
                      data-track="New York Mid Day"
                    ></span>
                  </label>
                </div>
                <div class="track-button-container">
                  <input
                    class="track-checkbox"
                    type="checkbox"
                    value="New York Evening"
                    id="trackNYEvening"
                  />
                  <label class="track-button" for="trackNYEvening">
                    <span class="track-name">New York Evening</span>
                    <span
                      class="cutoff-time"
                      data-track="New York Evening"
                    ></span>
                  </label>
                </div>

                <!-- ... (Georgia Mid Day, Evening, NJ MidDay, Evening, etc.) -->
                <!-- ... (Florida Mid Day, Evening, Connecticut, Pennsylvania, etc.) -->
                <!-- ... (Brooklyn Midday, Evening, Front Midday, Evening, etc.) -->
                <!-- ... (Venezuela checkbox, etc.) -->
                <!-- ... (NY Horses) -->

                <!-- 
                  Asegúrate de copiar aquí TODOS tus "track-button-container" 
                  que estaban en el snippet original, así completas las ~1200 líneas 
                -->
              </div>
            </div>
          </div>

          <!-- ================================ -->
          <!-- Sección Santo Domingo TRACKS -->
          <!-- ================================ -->
          <div class="accordion-item">
            <h2 class="accordion-header" id="headingSD">
              <button
                class="accordion-button collapsed"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#collapseSD"
                aria-expanded="false"
                aria-controls="collapseSD"
              >
                Santo Domingo
              </button>
            </h2>
            <div
              id="collapseSD"
              class="accordion-collapse collapse"
              aria-labelledby="headingSD"
              data-bs-parent="#tracksAccordion"
            >
              <div class="accordion-body">
                <!-- EJEMPLO DE TUS TRACKS SD (Real, Gana más, Loteka, etc.) -->
                <div class="track-button-container">
                  <input
                    class="track-checkbox"
                    type="checkbox"
                    value="Real"
                    id="trackReal"
                  />
                  <label class="track-button" for="trackReal">
                    <span class="track-name">Real</span>
                    <span class="cutoff-time" data-track="Real"></span>
                  </label>
                </div>
                <div class="track-button-container">
                  <input
                    class="track-checkbox"
                    type="checkbox"
                    value="Gana mas"
                    id="trackGanamas"
                  />
                  <label class="track-button" for="trackGanamas">
                    <span class="track-name">Gana más</span>
                    <span
                      class="cutoff-time"
                      data-track="Gana mas"
                    ></span>
                  </label>
                </div>
                <!-- ... (Loteka, Nacional, Quiniela Pale, etc.) -->
                <!-- ... (Primera Día, Suerte Día, Lotería Real, etc.) -->
                <!-- ... (Suerte Tarde, Lotedom, Primera Noche, etc.) -->
                <!-- ... (Panama, etc.) -->
                <!-- 
                  Igual, copia tus ~10+ track-button-container de SD 
                  para no perder nada 
                -->
              </div>
            </div>
          </div>

        </div>
      </div><!-- Fin de Tracks Selection -->

      <!-- Plays Table (Editable) -->
      <div class="table-responsive mb-4">
        <table
          class="table table-dark table-bordered glow-table"
          id="jugadasTable"
        >
          <thead>
            <tr>
              <th style="width: 40px;">#</th>
              <th>Bet Number</th>
              <th>Game Mode</th>
              <th>Straight ($)</th>
              <th>Box ($)</th>
              <th>Combo ($)</th>
              <th>Total ($)</th>
            </tr>
          </thead>
          <tbody id="tablaJugadas">
            <!-- Rows added dynamically in scripts.js -->
          </tbody>
        </table>
      </div>

      <!-- Buttons: Add, Wizard, Remove Last, Reset -->
      <div class="d-flex justify-content-between align-items-center mb-4">
        <div class="button-group">
          <button
            type="button"
            class="btn btn-primary"
            id="agregarJugada"
          >
            <i class="bi bi-plus-circle"></i> Add Play
          </button>
          <button
            type="button"
            class="btn btn-info"
            id="wizardButton"
          >
            <i class="bi bi-magic"></i> Wizard
          </button>
          <button
            type="button"
            class="btn btn-danger"
            id="eliminarJugada"
          >
            <i class="bi bi-dash-circle"></i> Remove Last Play
          </button>
          <button
            type="button"
            class="btn btn-warning"
            id="resetForm"
          >
            <i class="bi bi-arrow-clockwise"></i> Reset Form
          </button>
        </div>
        <!-- Make total text bigger -->
        <div class="total-section" style="font-size:1.25rem;">
          Total Plays: $
          <span id="totalJugadas">0.00</span>
        </div>
      </div>

      <!-- Generate Ticket -->
      <div class="d-grid gap-2">
        <button
          type="button"
          class="btn btn-success btn-lg"
          id="generarTicket"
        >
          <i class="bi bi-ticket-detailed-fill"></i> Generate Ticket
        </button>
      </div>
    </form>
  </div><!-- Fin container principal del form -->

  <!-- 
       ===========================================
       TICKET PREVIEW WINDOW
       ===========================================
  -->
  <div
    class="modal fade"
    id="ticketModal"
    tabindex="-1"
    aria-labelledby="ticketModalLabel"
    aria-hidden="true"
  >
    <div class="modal-dialog modal-xl modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="ticketModalLabel">
            Ticket Preview
          </h5>
          <button
            type="button"
            class="btn-close btn-close-white"
            data-bs-dismiss="modal"
            aria-label="Close"
          ></button>
        </div>
        <div class="modal-body">
          <div id="preTicket" class="p-3">
            <h4 class="text-center mb-3">East New York Cricket</h4>
            <p>
              <strong>Bet Dates:</strong>
              <span id="ticketFecha"></span>
            </p>
            <p>
              <strong>Selected Tracks:</strong>
              <span id="ticketTracks"></span>
            </p>
            <div class="table-responsive">
              <table class="table table-dark table-bordered">
                <thead>
                  <tr>
                    <th>#</th>
                    <th>Bet Number</th>
                    <th>Game Mode</th>
                    <th>Straight ($)</th>
                    <th>Box ($)</th>
                    <th>Combo ($)</th>
                    <th>Total ($)</th>
                  </tr>
                </thead>
                <tbody id="ticketJugadas">
                  <!-- Filled dynamically -->
                </tbody>
              </table>
            </div>
            <div class="total-section">
              Total Plays: $<span id="ticketTotal">0.00</span>
            </div>
            <div class="ticket-number my-3">
              Ticket Number: <span id="numeroTicket"></span>
            </div>
            <div class="transaction-date my-3">
              Transaction Date & Time:
              <span id="ticketTransaccion"></span>
            </div>
            <div class="barcode text-center">
              <div id="qrcode"></div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <!-- Edit => user can come back to edit main table -->
          <button
            type="button"
            class="btn btn-secondary"
            data-bs-dismiss="modal"
            id="editButton"
          >
            Edit
          </button>
          <!-- Confirm & Print -->
          <button
            type="button"
            class="btn btn-primary"
            id="confirmarTicket"
          >
            Confirm & Print
          </button>
          <!-- Share (hidden initially) -->
          <button
            type="button"
            class="btn btn-info d-none"
            id="shareTicket"
          >
            Share Ticket
          </button>
          <!-- Red "Close" -->
          <button
            type="button"
            class="btn btn-danger"
            data-bs-dismiss="modal"
          >
            Close
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- 
       ===========================================
       WIZARD WINDOW (Quick Entry)
       ===========================================
  -->
  <div
    class="modal fade"
    id="wizardModal"
    tabindex="-1"
    aria-labelledby="wizardModalLabel"
    aria-hidden="true"
  >
    <div class="modal-dialog modal-fullscreen-sm-down modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="wizardModalLabel">Quick Entry Window</h5>
          <button
            type="button"
            class="btn btn-danger"
            data-bs-dismiss="modal"
            aria-label="Close"
          >
            Close Window
          </button>
        </div>

        <div class="modal-body">
          <!-- FILA 1: Bet Number + Add & Next -->
          <div class="row mb-3">
            <div class="col-12 col-lg-6 d-flex align-items-end">
              <div class="me-2">
                <label for="wizardBetNumber" class="form-label"
                  >Bet Number</label
                >
                <!-- type="text" => permitir "22-55", "11x22", etc. -->
                <input
                  type="text"
                  class="form-control"
                  id="wizardBetNumber"
                  placeholder="2–4 digits or Pale (22-50)"
                  style="width: 180px;"
                />
              </div>
              <div>
                <button
                  type="button"
                  class="btn btn-primary mt-4"
                  id="wizardAddNext"
                >
                  <i class="bi bi-check2-circle"></i> Add & Next
                </button>
              </div>
            </div>
          </div>

          <!-- FILA 2: Straight + candado (izq) / Add Main (der) -->
          <div class="row mb-3">
            <div class="col-12 col-lg-6 d-flex align-items-end">
              <div>
                <label for="wizardStraight" class="form-label">Straight</label>
                <div class="d-flex align-items-center">
                  <input
                    type="number"
                    step="1"
                    class="form-control"
                    id="wizardStraight"
                    placeholder="e.g. 5"
                    style="width: 180px;"
                  />
                  <button
                    type="button"
                    class="btn btn-outline-secondary ms-1 lockBtn"
                    data-field="straight"
                    id="lockStraight"
                  >
                    <i class="bi bi-unlock"></i>
                  </button>
                </div>
              </div>
            </div>
            <div class="col-12 col-lg-6 d-flex justify-content-end align-items-end">
              <button
                type="button"
                class="btn btn-warning"
                id="wizardAddAllToMain"
              >
                <i class="bi bi-hdd-fill"></i> Add Main
              </button>
            </div>
          </div>

          <!-- FILA 3: Box (izq) / Generate (der) -->
          <div class="row mb-3">
            <div class="col-12 col-lg-6 d-flex align-items-end">
              <div>
                <label for="wizardBox" class="form-label">Box</label>
                <div class="d-flex align-items-center">
                  <input
                    type="text"
                    class="form-control"
                    id="wizardBox"
                    placeholder="e.g. 1,2"
                    style="width: 180px;"
                  />
                  <button
                    type="button"
                    class="btn btn-outline-secondary ms-1 lockBtn"
                    data-field="box"
                    id="lockBox"
                  >
                    <i class="bi bi-unlock"></i>
                  </button>
                </div>
              </div>
            </div>
            <div class="col-12 col-lg-6 d-flex justify-content-end align-items-end">
              <button
                type="button"
                class="btn btn-success"
                id="wizardGenerateTicket"
              >
                <i class="bi bi-ticket-detailed"></i> Generate
              </button>
            </div>
          </div>

          <!-- FILA 4: Combo (izq) / Edit Main (der) -->
          <div class="row mb-3">
            <div class="col-12 col-lg-6 d-flex align-items-end">
              <div>
                <label for="wizardCombo" class="form-label">Combo</label>
                <div class="d-flex align-items-center">
                  <input
                    type="number"
                    step="0.1"
                    class="form-control"
                    id="wizardCombo"
                    placeholder="e.g. 3.00"
                    style="width: 180px;"
                  />
                  <button
                    type="button"
                    class="btn btn-outline-secondary ms-1 lockBtn"
                    data-field="combo"
                    id="lockCombo"
                  >
                    <i class="bi bi-unlock"></i>
                  </button>
                </div>
              </div>
            </div>
            <div class="col-12 col-lg-6 d-flex justify-content-end align-items-end">
              <button
                type="button"
                class="btn btn-secondary"
                id="wizardEditMainForm"
              >
                <i class="bi bi-pencil-square"></i> Edit Main
              </button>
            </div>
          </div>

          <!-- Wizard Table -->
          <div class="table-responsive mb-3">
            <table class="table table-dark table-bordered" id="wizardTable">
              <thead>
                <tr>
                  <th style="width:40px;">#</th>
                  <th>Bet Number</th>
                  <th>Game Mode</th>
                  <th>Straight ($)</th>
                  <th>Box ($)</th>
                  <th>Combo ($)</th>
                  <th>Total ($)</th>
                </tr>
              </thead>
              <tbody id="wizardTableBody"></tbody>
            </table>
          </div>

          <!-- Quick Pick Section -->
          <div class="border p-2 mb-3">
            <h6>Quick Pick</h6>
            <div class="row mb-2">
              <div class="col-6">
                <label for="qpGameMode" class="form-label">Game Mode</label>
                <select class="form-select" id="qpGameMode">
                  <option value="Pick 3">Pick 3</option>
                  <option value="Win 4">Win 4</option>
                  <option value="Venezuela">Venezuela</option>
                  <option value="Pale-Ven">Pale-Ven</option>
                  <option value="Pulito">Pulito</option>
                  <option value="RD-Quiniela">RD-Quiniela</option>
                  <option value="Pale-RD">Pale-RD</option>
                  <option value="Single Action">Single Action</option>
                </select>
              </div>
              <div class="col-6">
                <label for="qpCount" class="form-label">How many plays?</label>
                <input
                  type="number"
                  class="form-control"
                  id="qpCount"
                  placeholder="1–25"
                  min="1"
                  max="25"
                  value="5"
                />
              </div>
            </div>
            <div class="d-flex gap-2">
              <button
                type="button"
                class="btn btn-info"
                id="btnGenerateQuickPick"
              >
                Quick Pick
              </button>
              <button
                type="button"
                class="btn btn-info"
                id="btnPermute"
              >
                Permute
              </button>
            </div>
          </div>

          <!-- Round Down Section -->
          <div class="border p-2 mb-3">
            <h6>Round Down</h6>
            <div class="row mb-2">
              <div class="col-6">
                <label for="rdFirstNumber" class="form-label"
                  >First Number</label
                >
                <input
                  type="text"
                  class="form-control"
                  id="rdFirstNumber"
                  placeholder="e.g. 120"
                />
              </div>
              <div class="col-6">
                <label for="rdLastNumber" class="form-label"
                  >Last Number</label
                >
                <input
                  type="text"
                  class="form-control"
                  id="rdLastNumber"
                  placeholder="e.g. 129"
                />
              </div>
            </div>
            <button
              type="button"
              class="btn btn-info"
              id="btnGenerateRoundDown"
            >
              Round Down
            </button>
          </div>

        </div>
      </div>
    </div>
  </div><!-- Fin WIZARD WINDOW -->

  <!-- 
       ============================================================
       SCRIPTS (jQuery, Bootstrap, Flatpickr, Dayjs, etc.)
       + tu scripts.js con la lógica del form
       + tutorial Intro.js y manual
       ============================================================
  -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script
    src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
  ></script>
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"
  ></script>
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <script
    href="https://cdn.jsdelivr.net/npm/flatpickr/dist/themes/material_blue.css"
  ></script>
  <script
    src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"
  ></script>
  <script src="https://cdn.jsdelivr.net/npm/dayjs@1/dayjs.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/dayjs@1/plugin/customParseFormat.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/dayjs@1/plugin/arraySupport.js"></script>
  <script>
    dayjs.extend(dayjs_plugin_customParseFormat);
    dayjs.extend(dayjs_plugin_arraySupport);
  </script>
  <script
    src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"
  ></script>

  <!-- 
    AQUI PEGAS TU scripts.js COMPLETO (tus 400-500 líneas con
    las funciones: 
      - addMainRow, recalcMainRow, determineGameMode, 
      - wizard logic, localStorage, doGenerateTicket, etc.)
    Asegúrate de quitar cualquier location.href a "manual.html?lang=" 
    y de mantener la parte de scale=2, JPEG 0.8, etc.
    * EJEMPLO: (no pego todo para no duplicar)
  -->
  <script>
    // EJEMPLO DE TU scripts.js 
    // (Simulación, pega aquí tu contenido real de ~400-500 líneas)
    // -------------------------------------------------------------------
    // 1) dayjs extends, cutoffTimes, flatpickr init, ...
    // 2) "Pulito", "Venezuela", "Pick 3" detection, ...
    // 3) Table add/remove row, wizard, combos, ...
    // 4) doGenerateTicket -> validate, build ticket, show modal, ...
    // 5) confirm => html2canvas(scale=2, JPEG 0.8), ...
    // 6) no location.href a manual.html
    // -------------------------------------------------------------------
  </script>

  <!-- 
       =====================
       MANUAL / INSTRUCTIONS
       (Accordion con 3 botones de idioma)
       + TUTORIAL INTRO.JS (E, S, C)
       =====================
  -->
  <div class="container mb-5">
    <div class="accordion" id="manualAccordion">
      <div class="accordion-item">
        <h2 class="accordion-header" id="headingManual">
          <button
            class="accordion-button collapsed"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#collapseManual"
            aria-expanded="false"
            aria-controls="collapseManual"
          >
            Manual / Instructions
          </button>
        </h2>
        <div
          id="collapseManual"
          class="accordion-collapse collapse"
          aria-labelledby="headingManual"
          data-bs-parent="#manualAccordion"
        >
          <div class="accordion-body">
            <!-- Botones para cambiar el idioma del manual -->
            <div class="d-flex gap-2 mb-3">
              <button class="btn btn-secondary" id="manualEnglishBtn">English</button>
              <button class="btn btn-secondary" id="manualSpanishBtn">Español</button>
              <button class="btn btn-secondary" id="manualCreoleBtn">Kreyòl</button>
            </div>

            <!-- Texto en Inglés (visible por defecto) -->
            <div id="manualEnglishText">
              <h4>Lottery App Manual (English)</h4>
              <p><strong>Date Selection:</strong> The date input lets you pick one or multiple betting dates. Today is automatically assigned.</p>
              <p><strong>Tracks:</strong> Expand the “USA” or “Santo Domingo” sections. Mark the tracks you want. Some tracks will disable after cutoff time. If you pick “Venezuela,” combine it with a USA track to do Venezuelan plays. For “NY Horses,” you can enter any digits (1–4) and it will appear as “NY Horses.”</p>
              <p><strong>Plays Table:</strong> Each row has a Bet Number, which determines the game mode (Pulito, Pick 3, Win 4, Single Action, NY Horses, etc.). Straight/Box/Combo amounts can be added. The total for that row is displayed. The overall total is multiplied by your number of selected dates and tracks.</p>
              <p><strong>Single Action:</strong> Occurs if you pick a standard USA track (not Venezuela, not NY Horses) and input exactly 1 digit in Bet Number.</p>
              <p><strong>NY Horses:</strong> If “New York Horses” is marked, any number of digits (1–4) results in “NY Horses.”</p>
              <p><strong>Buttons:</strong></p>
              <ul>
                <li>Add Play: Adds a new row in the table.</li>
                <li>Wizard: Opens the Quick Entry Window for bulk or random plays.</li>
                <li>Remove Last Play: Removes the final row from the table.</li>
                <li>Reset Form: Clears everything (dates, tracks, table).</li>
                <li>Generate Ticket: Shows the Ticket Preview window, where you can confirm, print, or share the ticket.</li>
              </ul>
              <p><strong>Quick Entry Window (Wizard):</strong> You can add multiple plays quickly, lock amounts (Straight, Box, Combo), generate Quick Picks, do Round Down sequences, or permute digits. Then click “Add Main” to pass them to the main table or “Generate” to create a ticket directly.</p>
              <p><strong>Ticket Preview:</strong> Upon generating a ticket, you see a preview with all plays, total amount, and a QR code. You can edit (return to the form) or confirm and print/share. A unique Ticket Number is assigned once you confirm.</p>
            </div>

            <!-- Texto en Español -->
            <div id="manualSpanishText">
              <h4>Manual Completo de la App de Lotería (Español)</h4>
              <p><strong>Selección de Fechas:</strong> El campo de fecha permite elegir una o varias fechas de apuesta. Por defecto, se asigna “hoy.”</p>
              <p><strong>Tracks:</strong> Expanda las secciones “USA” o “Santo Domingo.” Marque los tracks deseados. Algunos se desactivan tras la hora de corte. Si elige “Venezuela,” combínelo con un track de USA para jugadas venezolanas. Si marca “NY Horses,” puede ingresar de 1 a 4 dígitos y se mostrará como “NY Horses.”</p>
              <p><strong>Tabla de Jugadas:</strong> Cada fila tiene un Bet Number, que determina el modo de juego (Pulito, Pick 3, Win 4, Single Action, NY Horses, etc.). Puede ingresar montos de Straight/Box/Combo. El total de la fila aparece ahí. El total global se multiplica por la cantidad de fechas y tracks seleccionados.</p>
              <p><strong>Single Action:</strong> Sucede si selecciona un track estándar de USA (no Venezuela ni NY Horses) y coloca exactamente 1 dígito en Bet Number.</p>
              <p><strong>NY Horses:</strong> Si marca “New York Horses,” cualquier número de 1–4 dígitos se tomará como “NY Horses.”</p>
              <p><strong>Botones:</strong></p>
              <ul>
                <li>Add Play (Agregar Jugada): Añade una nueva fila a la tabla.</li>
                <li>Wizard: Abre la ventana de Quick Entry para jugadas múltiples o aleatorias.</li>
                <li>Remove Last Play (Quitar Última Jugada): Elimina la última fila de la tabla.</li>
                <li>Reset Form (Reiniciar): Limpia todo (fechas, tracks, tabla).</li>
                <li>Generate Ticket (Generar Ticket): Muestra la ventana de vista previa, donde puede confirmar, imprimir o compartir.</li>
              </ul>
              <p><strong>Ventana Quick Entry (Wizard):</strong> Le permite añadir jugadas rápidamente, bloquear montos (Straight, Box, Combo), hacer Quick Picks aleatorios, secuencias con Round Down o permutar dígitos. Luego “Add Main” pasa todo a la tabla principal o “Generate” crea el ticket directamente.</p>
              <p><strong>Vista Previa del Ticket:</strong> Al generar el ticket, se muestra una vista previa con todas las jugadas, el total y un código QR. Puede editar (volver al formulario) o confirmar e imprimir/compartir. Una vez confirmado, se asigna un número de ticket único.</p>
            </div>

            <!-- Texto en Criollo (Kreyòl) -->
            <div id="manualCreoleText">
              <h4>Manyèl Aplikasyon Lòtri (Kreyòl)</h4>
              <p><strong>Chwazi Dat:</strong> Zòn dat la pèmèt ou chwazi youn oswa plizyè dat pou parye. “Jodi a” se default.</p>
              <p><strong>Tracks:</strong> Louvri seksyon “USA” oswa “Santo Domingo.” Mak track ou vle. Gen track ki fèmen apre cutoff. Si ou chwazi “Venezuela,” melanje l ak yon track USA pou parye Venezuela. Si ou mete “NY Horses,” ou ka antre 1–4 chif, lap parèt kòm “NY Horses.”</p>
              <p><strong>Tab Pari (Plays Table):</strong> Chak ranje gen Bet Number ki detèmine mode la (Pulito, Pick 3, Win 4, Single Action, NY Horses, elatriye). Ou ka mete Straight/Box/Combo. Total la afiche pou ranje a. Som final la miltipliye pa kantite dat ak kantite track ou te chwazi.</p>
              <p><strong>Single Action:</strong> Fèt si ou pran track USA ki pa Venezuela ni NY Horses, epi ou antre sèlman 1 chif.</p>
              <p><strong>NY Horses:</strong> Si ou tcheke “New York Horses,” nenpòt 1–4 chif ap parèt kòm “NY Horses.”</p>
              <p><strong>Bouton:</strong></p>
              <ul>
                <li>Add Play: Ajoute yon nouvo ranje nan tablo a.</li>
                <li>Wizard: Louvri fenèt Quick Entry pou ajoute anpil parye vit oswa o aza.</li>
                <li>Remove Last Play: Efase dènye ranje a nan tablo a.</li>
                <li>Reset Form: Efase tout (dat, track, tablo).</li>
                <li>Generate Ticket: Montre fenèt Preview Ticket la, kote ou ka konfime, enprime, oswa pataje tikè a.</li>
              </ul>
              <p><strong>Fenèt Quick Entry (Wizard):</strong> Ou ka ajoute anpil parye vit, bloke montan (Straight, Box, Combo), fè Quick Picks, Round Down, oswa Permute. Apre sa, “Add Main” voye yo nan tablo prensipal la oswa “Generate” kreye tikè a dirèkteman.</p>
              <p><strong>Preview Ticket:</strong> Lè ou jenere tikè a, ou wè tout parye yo, montan total la, ak yon kòd QR. Ou ka edite (retounen nan fòm lan) oswa konfime pou enprime/pataje. Yon tikè gen yon nimewo inik lè ou konfime.</p>
            </div>

          </div><!-- .accordion-body -->
        </div><!-- .accordion-collapse -->
      </div><!-- .accordion-item -->
    </div><!-- .accordion -->
  </div><!-- .container -->

  <!-- 
      =============================
      TUTORIAL INTRO.JS (3 IDIOMAS)
      =============================
  -->
  <script>
    // Botones del manual en 3 idiomas
    $("#manualEnglishBtn").click(function(){
      $("#manualEnglishText").show();
      $("#manualSpanishText").hide();
      $("#manualCreoleText").hide();
    });
    $("#manualSpanishBtn").click(function(){
      $("#manualEnglishText").hide();
      $("#manualSpanishText").show();
      $("#manualCreoleText").hide();
    });
    $("#manualCreoleBtn").click(function(){
      $("#manualEnglishText").hide();
      $("#manualSpanishText").hide();
      $("#manualCreoleText").show();
    });

    // Pasos más extensos del tutorial
    const tutorialStepsEN = [
      {
        element: '#fecha',
        intro: 'Select one or multiple betting dates. By default, today is chosen.',
      },
      {
        element: '#tracksAccordion',
        intro: 'Expand “USA” or “Santo Domingo” to pick your tracks. Some will disable after the cutoff time.'
      },
      {
        intro: 'If you pick “Venezuela,” combine it with a USA track for Venezuelan plays. With “NY Horses,” you can enter 1–4 digits for that special mode.'
      },
      {
        element: '#jugadasTable',
        intro: 'Plays Table: each row has a Bet Number. The app detects the mode (Pulito, Pick 3, Win 4, Single Action, etc.). Then put Straight/Box/Combo amounts.'
      },
      {
        element: '#agregarJugada',
        intro: 'Click “Add Play” to add a row. You can remove plays or reset the entire form if needed.'
      },
      {
        intro: 'Pulito => 2 digits, track USA, no SD. Venezuela => 2 digits, with track Venezuela + USA. Single Action => 1 digit in a normal USA track. '
      },
      {
        element: '#wizardButton',
        intro: 'Wizard (Quick Entry): a separate window for quick or random plays, Round Down, etc.'
      },
      {
        intro: 'Inside the Wizard: you can lock Straight/Box/Combo, type a Bet Number, do Quick Picks, Round Down sequences, Permute digits, etc.'
      },
      {
        element: '#generarTicket',
        intro: 'When you are done, click “Generate Ticket” to see the preview.'
      },
      {
        element: '#ticketModal',
        intro: 'The Ticket Preview shows each play, the total, and a QR code. You can “Edit” or “Confirm & Print” to finalize. A unique ticket number is assigned.'
      },
      {
        intro: 'After confirmation, the ticket image is downloaded (JPEG), and you can share if supported. That’s the complete flow!'
      }
    ];

    const tutorialStepsES = [
      {
        element: '#fecha',
        intro: 'Seleccione una o varias fechas de apuesta. Por defecto, se elige “hoy.”'
      },
      {
        element: '#tracksAccordion',
        intro: 'Expanda “USA” o “Santo Domingo” para elegir sus tracks. Algunos se desactivan tras la hora límite.'
      },
      {
        intro: 'Si marca “Venezuela,” combínelo con un track de USA. Con “NY Horses,” ingrese 1–4 dígitos en Bet Number.'
      },
      {
        element: '#jugadasTable',
        intro: 'Tabla de Jugadas: cada fila tiene un Bet Number. La app detecta Pulito, Pick 3, Win4, Single Action, etc. Luego ingrese Straight/Box/Combo.'
      },
      {
        element: '#agregarJugada',
        intro: 'Use “Add Play” para añadir jugadas. Puede remover o resetear todo el formulario si desea.'
      },
      {
        intro: 'Pulito => 2 dígitos con track de USA. Venezuela => 2 dígitos con track Venezuela + USA. Single Action => 1 dígito en track USA normal.'
      },
      {
        element: '#wizardButton',
        intro: 'Wizard (Quick Entry): ventana para jugadas rápidas o aleatorias, Round Down, etc.'
      },
      {
        intro: 'Dentro del Wizard: bloquee Straight/Box/Combo, teclee Bet Number, use Quick Pick, Round Down, o Permute.'
      },
      {
        element: '#generarTicket',
        intro: 'Al terminar, presione “Generate Ticket” para ver la vista previa.'
      },
      {
        element: '#ticketModal',
        intro: 'La vista previa muestra cada jugada, el total y un código QR. Puede “Edit” o “Confirm & Print” para confirmar. Se asigna un número único.'
      },
      {
        intro: 'Tras confirmar, se descarga la imagen (JPEG) y puede compartirla si su navegador lo soporta. ¡Ese es todo el flujo!'
      }
    ];

    const tutorialStepsHT = [
      {
        element: '#fecha',
        intro: 'Chwazi youn oswa plizyè dat pou parye. “Jodia” se default.'
      },
      {
        element: '#tracksAccordion',
        intro: 'Louvri “USA” oswa “Santo Domingo,” mak track ou vle. Gen ki fèmen apre cutoff.'
      },
      {
        intro: 'Si ou mete “Venezuela,” dwe gen track USA tou. Avèk “NY Horses,” mete 1–4 chif pou mode sa.'
      },
      {
        element: '#jugadasTable',
        intro: 'Tab Pari: chak ranje gen Bet Number, app la detekte Pulito, Win4, Pick 3, Single Action, elatriye.'
      },
      {
        element: '#agregarJugada',
        intro: 'Klike “Add Play” pou ajoute ranje. Ou ka retire parye oswa reset fòm lan.'
      },
      {
        intro: 'Pulito => 2 chif ak track USA. Venezuela => 2 chif + track Venezuela+USA. Single Action => 1 chif, track USA normal.'
      },
      {
        element: '#wizardButton',
        intro: 'Wizard (Quick Entry): fenèt pou antre rapid, aleatwa (Quick Pick), Round Down, elatriye.'
      },
      {
        intro: 'Andedan Wizard la: Ka “lock” Straight/Box/Combo, antre Bet Number, Quick Pick, Round Down, Permute.'
      },
      {
        element: '#generarTicket',
        intro: 'Lè ou fini, klike “Generate Ticket” pou wè preview la.'
      },
      {
        element: '#ticketModal',
        intro: 'Preview a montre parye yo, total la, ak kòd QR. Ou ka “Edit” oswa “Confirm & Print.” Ap gen yon nimewo inik.'
      },
      {
        intro: 'Lè w konfime, imaj (JPEG) telechaje, ou ka pataje si navigatè a sipòte. Se tout pwosesis la!'
      }
    ];

    function startTutorial(lang) {
      let steps = tutorialStepsEN;
      let nextLabel='Next', prevLabel='Back', skipLabel='Skip', doneLabel='Done';

      if(lang==='es'){
        steps = tutorialStepsES;
        nextLabel='Siguiente'; prevLabel='Atrás'; skipLabel='Omitir'; doneLabel='Listo';
      } else if(lang==='ht'){
        steps = tutorialStepsHT;
        nextLabel='Next'; prevLabel='Back'; skipLabel='Skip'; doneLabel='Ok';
      }

      introJs().setOptions({
        steps,
        showStepNumbers: true,
        showProgress: false,
        exitOnOverlayClick: true,
        scrollToElement: false,
        nextLabel,
        prevLabel,
        skipLabel,
        doneLabel
      }).start();
    }

    $("#helpEnglish").click(()=>startTutorial('en'));
    $("#helpSpanish").click(()=>startTutorial('es'));
    $("#helpCreole").click(()=>startTutorial('ht'));
  </script>
</body>
</html>
